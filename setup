#!/bin/bash

user_name=$(whoami)
env_home="/home/$user_name/.ansible-venv"

if ! command -v python &> /dev/null; then
    echo "Python is required"
    exit 1
fi

echo "Создаем и активируем виртуальную среду"
python -m venv $env_home
source $env_home/bin/activate

echo "Устанавливаем Ansible версии 2.12"
pip install ansible-core==2.12

echo "Устанавливаем python-netaddr"
pip install netaddr

echo "Устанавливаем jinja2 версии 3.0"
pip install jinja2==3.0

deactivate
echo "Для работы с Ansible нужно активировать виртуальную среду! Это можно сделать командой: $env_home/bin/activate"